<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<th:block th:replace="fragments/commonHeader"></th:block>
</head>
<body>
	<section class="notice">
	  	<div class="page-title">
	        <div class="container">
	            <h3>게시판</h3>
	            <div class="search-wrap">
	        		<button type="button" class="btn btn-dark" style="float:right;width:108px;height:40px;" onclick="boardPopup();">입력</button>
	        	</div>
	        </div>    
	    </div>

	    <!-- board seach area -->
	    <div id="board-search">
	        <div class="container">
	            <div class="search-window">
	                <!-- <form action="./selectBoardList"> -->
	                    <div class="search-wrap">
	                        <label for="search" class="blind">공지사항 내용 검색</label>
	                        <input id="keyword" type="search" name="keyword" placeholder="검색어를 입력해주세요." value="">
	                        <button type="button" class="btn btn-dark" onclick="selectList();">검색</button>
	                    </div>
	                <!-- </form> -->
	            </div>
	        </div>
	    </div>
	    
	    <div id="grid" style="width:1350px; height:800px; margin:0 auto;"></div>
	    
	    <!-- board list area -->
	    <!-- 
	    <div id="board-list">
	        <div class="container">
	            <table class="board-table">
	                <thead>
		                <tr>
		                    <th scope="col" class="th-num">번호</th>
		                    <th scope="col" class="th-title">제목</th>
		                    <th scope="col" class="th-date">등록일</th>
		                </tr>
	                </thead>
	                <tbody>             
		                <tr th:each="List : ${selectboardList}">
		                	<td th:text="${List.idx}">idx</td>
		                	<th a:href="#${List.idx}" th:text="${List.title}">title</th>
		                	<td th:text="${List.content}">content</td>
		                </tr>
		                <tr>
		                    <td>3</td>
		                    <th>
		                      <a href="#!">[공지사항] 개인정보 처리방침 변경안내처리방침</a>
		                      <p>테스트</p>
		                    </th>
		                    <td>2017.07.13</td>
		                </tr>	
		                <tr>
		                    <td>2</td>
		                    <th><a href="#!">공지사항 안내입니다. 이용해주셔서 감사합니다</a></th>
		                    <td>2017.06.15</td>
		                </tr>	
		                <tr>
		                    <td>1</td>
		                    <th><a href="#!">공지사항 안내입니다. 이용해주셔서 감사합니다</a></th>
		                    <td>2017.06.15</td>
		                </tr>               
	                </tbody>
	            </table>
	        </div>
	    </div>
	    -->
	</section>
</body>
<script th:inline="javascript">
var grid;

$(function(){
	grid = new tui.Grid({
	    el: document.getElementById('grid'),
	    scrollX: false,
	    scrollY: false,
	    rowHeight:30,
	    columnOptions: {
	        minWidth: 180
	    },
	    columns: [
	      {
	          header: '순번',
	          name: 'idx',
	          width: 'auto',
	          align:'center'
	      },
	      {
	    	  header: '제목',
	          name: 'title',
	          align:'center',
	          width: 'auto'
	      },
	      {
	          header: '내용',
	          name: 'content',
	          align:'center'
	      }
	    ]
	});
	
	selectList(grid);
	
	grid.on('click', (evt) => {
		//console.log("evt",evt);
		var rowData = evt.instance.store.data.rawData[0];
		//console.log("rowData",rowData);
		if(evt.columnName == "title"){
			boardPopup(rowData["idx"]);	
		}
	});
});

function selectList(grid){
	$.ajax({
	    url: '/board/selectBoardList',
	    async: true,
	    type: 'GET',
	    data: {
	    	keyword: $("#keyword").val(),
	    },
	    dataType: 'json',
	    beforeSend: function(jqXHR) {
	    	
	    },
	    success: function(data) {
	    	grid.resetData(data);
	    },
	    error: function(jqXHR) {
	    	console.log("error"); 
	    },
	    complete: function(jqXHR) {
	    	console.log("complete"); 
	    }
	});
};

function boardPopup(idx){
	var popupWidth = 700;
	var popupHeight = 850;
	
	var popupX = (window.screen.width / 2) - (popupWidth / 2);
	// 만들 팝업창 width 크기의 1/2 만큼 보정값으로 빼주었음

	var popupY= (window.screen.height / 2) - (popupHeight / 2);
	// 만들 팝업창 height 크기의 1/2 만큼 보정값으로 빼주었음
	
	var url = "/board/boardModal";
	if(idx != undefined){
		url += "?idx=" + idx;
	}
	
	
	var popupConfig = 'status=no, height=' + popupHeight + ',width=' + popupWidth + ',left=' + popupX + ',top=' + popupY;
	var win = window.open(url, "신규 POPUP", popupConfig);
}
</script>

</html>